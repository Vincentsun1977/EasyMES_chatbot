<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>AI Chatbot</title>
    <link rel="icon" type="image/png" href="/static-debug/chatbot.png">
    <link rel="stylesheet" href="/static-debug/chat.css?v=37">
</head>
<body>
    <div class="chat-container">
        <!-- Sidebar for conversation history -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>历史会话</h3>
                <button id="closeSidebar" class="btn-icon-small">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div id="conversationList" class="conversation-list">
                <div class="loading-conversations">
                    <div class="spinner"></div>
                    <span>加载中...</span>
                </div>
            </div>
        </div>
        
        <!-- Sidebar overlay for mobile -->
        <div id="sidebarOverlay" class="sidebar-overlay"></div>
        
        <!-- Chat Header -->
        <div class="chat-header">
            <button id="menuBtn" class="btn-icon" title="历史会话">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12h18M3 6h18M3 18h18"/>
                </svg>
            </button>
            <h2>小易 - EasyMES AI助手 Beta 1.0</h2>
            <div class="header-actions">
                <button id="clearBtn" class="btn-icon" title="新对话">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h8"/>
                        <path d="M17 3v6M14 6h6"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Chat Messages -->
        <div id="chatMessages" class="chat-messages">
            <div class="message bot-message">
                <div class="message-avatar bot-avatar">小易</div>
                <div class="message-content">
                    <div class="markdown-body">
                        <p>您好！我是小易，我可以回答关于**EasyMES**的相关问题，比如：<br>
                            <br>
                            📊 数据查询类型<br>
                            1. **产线数据** - 某月某产线的转序数量<br>
                            2. **操作员信息** - 某操作工人某天的完成数量<br>
                            3. **订单参数** - 某订单/产品的参数<br>
                            <br>
                            ⚠️ **重要提示**：请尽量提供具体的信息以便我更好地帮助您，比如`订单号`、`日期`等。<br>
                            <br>
                            💡 示例查询
                            - "请查询2024年1月产线A的转序数量"<br>
                            - "张三昨天的完成数量是多少？"<br>
                            - "订单12345的产品参数"
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Input -->
        <div class="chat-input-container">
            <form id="chatForm">
                <textarea 
                    id="messageInput" 
                    placeholder="输入您的问题..." 
                    rows="1"
                    maxlength="2000"
                ></textarea>
                <button type="button" id="sendBtn" class="send-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                    </svg>
                </button>
            </form>
        </div>

        <!-- Connection Status -->
        <div id="connectionStatus" class="connection-status hidden">
            <span class="status-dot"></span>
            <span class="status-text">连接中...</span>
        </div>
    </div>

    <script src="/static-debug/chat.js?v=44"></script>
</body>
</html>
